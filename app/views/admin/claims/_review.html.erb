<form novalidate="novalidate">
  <center><b>Review Claim Data</b></center>
  <br>
  <fieldset class="inputs">
    <ol>
      <li class="input stringish">
        <label class="label">Claim Number</label>
        <input maxlength="255" type="text" value="<%= claim&.review_claim_number %>" name="claim_number">
      </li>
      <li class="input stringish">
        <label class="label">Policy Number</label>
        <input maxlength="255" type="text" value="<%= claim&.review_policy_number %>" name="policy_number">
      </li>
      <li class="input stringish">
        <label class="label">Type of Loss</label>
        <input maxlength="255" type="text" value="<%= claim&.review_loss_type %>" name="loss_type">
      </li>
      <li class="input">
        <label class="label">Date of Loss</label>
        <input type="date" style="width: fit-content;" value="<%= claim&.review_loss_date rescue '' %>" name="loss_date">
      </li>
    </ol>
  </fieldset>

  <center><b>Review Items</b></center>
  <br>
  <fieldset class="inputs" style="padding: 20px;">
    <ol>
      <li class="input stringish">
        <label class="label">Item Name</label>
        <input maxlength="255" type="text" value="Room: (living Room)">
        <br>
        <br>
        <fieldset class="inputs" style="padding: 12px; margin: 0 30px;">
          <ol>
            <li class="input stringish">
              <label class="label">Description</label>
              <input maxlength="255" type="text" value="Remove and Reset Contents">
            </li>
            <li class="input stringish">
              <label class="label">Quantity</label>
              <input maxlength="255" type="text" value="">
            </li>
            <li class="input stringish">
              <label class="label">Unit Price</label>
              <input maxlength="255" type="text" value="1">
            </li>
            <li class="input stringish">
              <label class="label">Price</label>
              <input maxlength="255" type="text" value="">
            </li>
            <li class="input stringish">
              <label class="label">ACV</label>
              <input maxlength="255" type="text" value="">
            </li>
            <li class="input stringish">
              <label class="label">RCV</label>
              <input maxlength="255" type="text" value="$500.00">
            </li>
          </ol>
        </fieldset>
      </li>
    </ol>
    <div class="buttons" style="float: right;">
      <input type="button" name="add" value="Add New Item" data-disable-with="Add New Item" onclick="console.log('ok');">
    </div>
  </fieldset>

  <br><br><br>
  <%- begin %>
    <%- column = @claim.meta["tables"].first.keys %>

    <table>
      <h3>Room: (living Room)</h3>
      <tr>
        <th></th>
        <%- ["DESCRIPTION", "QUANTITY", "UNIT", "PRICE", "ACV", "RCV"].each_with_index.each do |key| %>
          <th>
            <%= key.upcase %>
          </th>
        <%- end %>
      </tr>
      <%- (1..2).each_with_index do |row, index| %>
        <tr>
          <td><%= index + 1 %></td>
          <td>
            Remove and Reset Contents
          </td>
          <td>
          </td>
          <td>
            1
          </td>
          <td>
          </td>
          <td>
          </td>
          <td>
            $500.00
          </td>
          <td>
            X
          </td>
        <tr>
      <%- end %>
    </table>

    <style>
      table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }

      .attributes_table table td {
        padding: 0;
        padding-top: 5px;
        padding-bottom: 5px;
      }

    </style>

  <%- rescue %>
    <p>Data not found.</p>
  <%- end %>


</form>

<br><br><br>
<hr>
<br><br><br>
<div class="buttons" style="float: right;">
  <a href="<%= export_claim_url(format: :pdf) %>" target="_blank" id="save-review">
    <input type="submit" name="commit" value="Save & Export" data-disable-with="Save & Export">
  </a>
</div>

<script type="text/javascript">

  $("#save-review").click(function(){
  $.post("<%= review_claim_url(claim) %>",
    {
      data: {
        claim_number: $("input[name=claim_number").val(),
        policy_number: $("input[name=policy_number").val(),
        loss_type: $("input[name=loss_type").val(),
        loss_date: $("input[name=loss_date").val()
      }
    },
    function(data, status){
      console.log("Data: " + data + "\nStatus: " + status);
    });
  });

</script>
